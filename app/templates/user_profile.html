{% extends "base.html" %}
{% block title %}Profil - {{ user.username }}{% endblock %}

{% block content %}
    <h1>Profilul Utilizatorului: {{ user.username }}</h1>
    <p>Email: {{ user.email }}</p>
    <hr>

    <section class="utility-section">
        <h2>Codul QR al Profilului</h2>
        <p>PoÈ›i partaja acest cod QR cu prietenii pentru a le facilita accesul la profilul tÄƒu.</p>
        
        {# Aici afiÈ™Äƒm imaginea QR code-ului folosind Base64 URI #}
        {% if qr_data_uri %}
            <img src="{{ qr_data_uri }}" alt="QR Code Profil" class="qr-code">
        {% else %}
            <p>Nu s-a putut genera codul QR.</p>
        {% endif %}
        
        <hr>

        <h2>Export Date</h2>
        <p>ApasÄƒ butonul de mai jos pentru a descÄƒrca lista ta de filme "VÄƒzute" Ã®n format CSV.</p>
        <a href="{{ url_for('export_seen_list') }}" class="btn btn-download">
            DescÄƒrcÄƒ Lista VÄƒzute (CSV)
        </a>

        {# Buton NOU: Export De VÄƒzut #}
            <a href="{{ url_for('export_to_watch_list') }}" class="btn btn-download btn-secondary">
                DescÄƒrcÄƒ Lista De VÄƒzut (CSV)
            </a>
    </section>

    <section class="movie-lists">
        <h2>ðŸŽ¬ Listele Mele</h2>
        
        <h3>VÄƒzute ({{ seen_movies|length }})</h3>
        <ul>
            {% for entry in seen_movies %}
                <li><a href="{{ url_for('movie_details', movie_id=entry.movie_id) }}">{{ entry.movie.title }}</a> - AdÄƒugat: {{ entry.date_added.strftime('%Y-%m-%d') }}</li>
            {% endfor %}
        </ul>

        <h3>De VÄƒzut ({{ to_watch_movies|length }})</h3>
        <ul>
            {% for entry in to_watch_movies %}
                <li><a href="{{ url_for('movie_details', movie_id=entry.movie_id) }}">{{ entry.movie.title }}</a> - AdÄƒugat: {{ entry.date_added.strftime('%Y-%m-%d') }}</li>
            {% endfor %}
        </ul>
    </section>
{% endblock %}